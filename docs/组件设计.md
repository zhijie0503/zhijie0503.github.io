# 方格消除游戏 - 组件设计

## 组件结构

本游戏采用了组件化设计，主要包含以下组件：

```
App
└── Grid
    └── Cell
```

## App 组件

App组件是应用的顶层组件，负责：

1. 管理游戏状态（得分、游戏重置）
2. 提供整体布局和样式
3. 包含游戏标题、说明和控制按钮

```typescript
function App() {
  const [score, setScore] = useState(0)
  const [gameKey, setGameKey] = useState(0)

  const handleScoreChange = (points: number) => {
    setScore(prevScore => prevScore + points)
  }

  const handleReset = () => {
    setScore(0)
    setGameKey(prevKey => prevKey + 1)
  }

  return (
    <Container>
      <Title>方格消除游戏</Title>
      <Description>
        选择数字，使它们的和等于10来消除方格。
      </Description>
      <ScoreBoard>
        得分: <ScoreValue>{score}</ScoreValue>
      </ScoreBoard>
      <Grid key={gameKey} onScoreChange={handleScoreChange} />
      <ResetButton onClick={handleReset}>重新开始</ResetButton>
    </Container>
  )
}
```

## Grid 组件

Grid组件是游戏的核心，负责：

1. 生成和管理网格数据
2. 处理用户的鼠标交互
3. 计算选中单元格的数字和
4. 实现数字消除和重新生成的逻辑
5. 显示当前选择状态的提示信息

关键状态：
- `grid`：二维数组，存储网格中每个单元格的数据
- `selectedCells`：数组，存储当前选中的单元格位置
- `isSelecting`：布尔值，表示是否正在选择中
- `selectionSum`：数字，当前选中单元格的数字总和

## Cell 组件

Cell组件表示网格中的单个单元格，负责：

1. 显示数字值
2. 根据数字值显示不同的颜色
3. 处理选中状态的视觉效果
4. 响应鼠标事件

```typescript
const Cell = ({ value, isSelected, onMouseDown, onMouseEnter }: CellProps) => {
  return (
    <CellContainer 
      isSelected={isSelected}
      onMouseDown={onMouseDown}
      onMouseEnter={onMouseEnter}
      value={value}
    >
      {value}
    </CellContainer>
  )
}
```

## 样式设计

本项目使用Styled Components实现样式，特点包括：

1. 基于组件的CSS封装
2. 根据组件状态动态生成样式
3. 使用模板字符串语法定义样式
4. 支持嵌套和伪类

例如，单元格的样式定义：

```typescript
const CellContainer = styled.div<StyledCellProps>`
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-weight: bold;
  margin: 2px;
  border-radius: 4px;
  color: #fff;
  background-color: ${props => props.isSelected 
    ? '#f39c12' // 选中状态为橙色
    : getColorByValue(props.value)};
  transition: all 0.2s ease;
  box-shadow: ${props => props.isSelected 
    ? '0 0 8px rgba(243, 156, 18, 0.8)' 
    : '0 2px 4px rgba(0, 0, 0, 0.2)'};
  transform: ${props => props.isSelected ? 'scale(1.1)' : 'scale(1)'};
  z-index: ${props => props.isSelected ? 2 : 1};
  
  &:hover {
    filter: brightness(1.2);
  }
  
  &:active {
    transform: scale(0.95);
  }
`
``` 